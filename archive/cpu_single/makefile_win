CC = g++
CFLAGS = -O3 -Wall
TARGET = sort_benchmark

all: $(TARGET)

$(TARGET): main.cpp
	$(CC) $(CFLAGS) main.cpp -o $(TARGET)

# Note: Using a shell-compatible loop. 
# If you are on Windows using Git Bash/MinGW, this works.
hardware_info:
	@echo "--- Capturing Static Hardware Info ---"
	systeminfo > hardware_specs.txt
	@echo "--- Hardware Info Saved to hardware_specs.txt ---"

bench: $(TARGET)
	@echo Size,Bitonic(ms),StdSort(ms) > result.csv
	@for %%n in (1024 2048 4096 8192 16384 32768 65536 131072 262144 524288 524288 2097152 4194304 8388608 16777216) do @( \
		echo Running size %%n... && \
		.\$(TARGET) %%n >> result.csv \
	)
	@echo Benchmark complete. Results saved to result.csv

clean:
	del $(TARGET).exe
	del result.csv
	del hardware_specs.txt